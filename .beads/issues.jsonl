{"id":"mcp-02c","title":"Phase 2: Foundational - Types \u0026 ProtectedResourceAuth Combinator","description":"Add ProtectedResourceMetadata type and ProtectedResourceAuth combinator to src/MCP/Server/Auth.hs.\n\n## Tasks (T004-T014)\n\n### ProtectedResourceMetadata Type\n- T004: Add ProtectedResourceMetadata data type\n- T005: Add ToJSON instance with RFC9728 field names\n- T006: Add FromJSON instance\n- T007: Export ProtectedResourceMetadata\n\n### ProtectedResourceAuth Combinator (Framework-level 401 handling)\n- T008: Add ProtectedResourceAuth data type (type-level tag)\n- T009: Add ProtectedResourceAuthConfig with resourceMetadataUrl field\n- T010: Add AuthServerData type family instance\n- T011: Add ThrowAll instance returning 401 with WWW-Authenticate header\n- T012: Export ProtectedResourceAuth and ProtectedResourceAuthConfig\n\n### HTTPServerConfig Updates\n- T013: Add httpProtectedResourceMetadata field\n- T014: Add defaultProtectedResourceMetadata helper\n\n## Key Change\nThe ProtectedResourceAuth combinator handles 401 responses at the framework level - apps don't manually add WWW-Authenticate headers.\n\n## Files to Modify\n- src/MCP/Server/Auth.hs (T004-T012)\n- src/MCP/Server/HTTP.hs (T013-T014)\n\n## Reference\n- Data model: specs/001-claude-mcp-connector/data-model.md\n- RFC9728: https://datatracker.ietf.org/doc/html/rfc9728","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T15:03:14.969232509+01:00","updated_at":"2025-12-08T16:00:58.086118478+01:00","closed_at":"2025-12-08T16:00:58.086118478+01:00","dependencies":[{"issue_id":"mcp-02c","depends_on_id":"mcp-2ij","type":"parent-child","created_at":"2025-12-08T15:03:14.969689739+01:00","created_by":"daemon"}]}
{"id":"mcp-1dt","title":"Phase 1: Setup - Review existing OAuth flow","description":"Review existing OAuth implementation to identify modification points.\n\n**Tasks**:\n- T001: Review existing OAuth flow in src/MCP/Server/HTTP.hs\n- T002: Review existing OAuthConfig in src/MCP/Server/Auth.hs\n\n**Files**: src/MCP/Server/HTTP.hs, src/MCP/Server/Auth.hs\n**Ref**: specs/002-login-auth-page/tasks.md#phase-1-setup","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T17:19:13.077467367+01:00","updated_at":"2025-12-10T12:17:48.527294176+01:00","closed_at":"2025-12-10T12:17:48.527294176+01:00"}
{"id":"mcp-1q9","title":"Phase 3: User Story 1 - User Authenticates with Credentials (MVP)","description":"ðŸŽ¯ MVP - Core authentication flow\n\n**Goal**: User can enter username/password on login page and receive authorization code on successful auth.\n\n**Independent Test**: Access /authorize â†’ see login form â†’ submit demo/demo123 â†’ get redirected with code\n\n**Tasks** (T019-T028):\n- Modify handleAuthorize to render login page\n- Implement handleLogin endpoint\n- Wire up session cookies\n- Generate auth code on success\n- Handle invalid credentials\n- Remove autoApproveAuth logic\n\n**Files**: src/MCP/Server/HTTP.hs\n**Spec**: specs/002-login-auth-page/spec.md#user-story-1\n**Acceptance**: 4 scenarios defined in spec","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T17:19:42.776012022+01:00","updated_at":"2025-12-08T17:38:21.53318128+01:00","closed_at":"2025-12-08T17:38:21.53318128+01:00","dependencies":[{"issue_id":"mcp-1q9","depends_on_id":"mcp-9k8","type":"parent-child","created_at":"2025-12-08T17:19:42.776487152+01:00","created_by":"daemon"},{"issue_id":"mcp-1q9","depends_on_id":"mcp-6lv","type":"blocks","created_at":"2025-12-08T17:19:42.77705584+01:00","created_by":"daemon"}]}
{"id":"mcp-226","title":"Phase 5: User Story 3 - User Denies Authorization","description":"User can click Deny button to refuse authorization.\n\n**Goal**: User control - can refuse to grant access to requesting application.\n\n**Independent Test**: Access login page â†’ click Deny â†’ get redirected with access_denied error\n\n**Tasks** (T033-T036):\n- Handle action=deny in handleLogin\n- Generate OAuth access_denied error\n- Redirect with error and preserved state\n- Clean up PendingAuthorization on deny\n\n**Files**: src/MCP/Server/HTTP.hs\n**Spec**: specs/002-login-auth-page/spec.md#user-story-3\n**Acceptance**: 2 scenarios defined in spec","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-08T17:20:03.746987606+01:00","updated_at":"2025-12-08T17:42:21.91904816+01:00","closed_at":"2025-12-08T17:42:21.91904816+01:00","dependencies":[{"issue_id":"mcp-226","depends_on_id":"mcp-9k8","type":"parent-child","created_at":"2025-12-08T17:20:03.747730762+01:00","created_by":"daemon"},{"issue_id":"mcp-226","depends_on_id":"mcp-1q9","type":"blocks","created_at":"2025-12-08T17:20:03.748575865+01:00","created_by":"daemon"}]}
{"id":"mcp-2ij","title":"Claude.ai MCP Connector Compatibility","description":"Epic: Enable mcp-http server to work as MCP Connector in Claude.ai\n\n## Overview\nImplement RFC9728 Protected Resource Metadata, ProtectedResourceAuth combinator for automatic WWW-Authenticate headers, and verify Dynamic Client Registration for Claude.ai compatibility.\n\n## Key Deliverables\n1. ProtectedResourceMetadata type in MCP.Server.Auth\n2. ProtectedResourceAuth combinator (framework-level 401 handling with WWW-Authenticate)\n3. /.well-known/oauth-protected-resource endpoint\n4. resource parameter support (RFC8707)\n5. --base-url CLI option for mcp-http\n\n## Architecture\nThe ProtectedResourceAuth combinator handles 401 responses at the framework level. Apps don't manually handle 401 responses - they get RFC9728-compliant WWW-Authenticate headers automatically.\n\n## Related Files\n- Spec: specs/001-claude-mcp-connector/spec.md\n- Plan: specs/001-claude-mcp-connector/plan.md\n- Tasks: specs/001-claude-mcp-connector/tasks.md\n- Data Model: specs/001-claude-mcp-connector/data-model.md\n\n## Success Criteria\n- Claude.ai can discover and connect to mcp-http via OAuth flow\n- All 401 responses include WWW-Authenticate header (automatic via combinator)\n- Full OAuth flow completes successfully","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T15:02:49.198242508+01:00","updated_at":"2025-12-08T16:06:36.423462955+01:00","closed_at":"2025-12-08T16:06:36.423462955+01:00"}
{"id":"mcp-3an","title":"Phase 5: Add RFC8707 resource parameter to OAuth endpoints","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T16:00:59.211008466+01:00","updated_at":"2025-12-08T16:02:22.339989886+01:00","closed_at":"2025-12-08T16:02:22.339989886+01:00"}
{"id":"mcp-3pe","title":"Phase 7: Add --base-url CLI option to mcp-http","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T16:01:00.429419385+01:00","updated_at":"2025-12-08T16:04:25.297389839+01:00","closed_at":"2025-12-08T16:04:25.297389839+01:00"}
{"id":"mcp-55k","title":"T006: Create ServerTrace skeleton in src/MCP/Trace/Server.hs","description":"[P] Create MCP.Trace.Server module with ServerTrace type (composite placeholder only) and renderServerTrace stub. Ref: data-model.md ServerTrace section.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:33:35.697634413+01:00","updated_at":"2025-12-10T12:17:35.551473295+01:00","closed_at":"2025-12-10T12:17:35.551473295+01:00"}
{"id":"mcp-5el","title":"Phase 1: Setup - Review existing OAuth flow","description":"Review existing OAuth implementation to identify modification points.\n\n**Tasks**:\n- T001: Review existing OAuth flow in src/MCP/Server/HTTP.hs\n- T002: Review existing OAuthConfig in src/MCP/Server/Auth.hs\n\n**Files**: src/MCP/Server/HTTP.hs, src/MCP/Server/Auth.hs\n**Ref**: specs/002-login-auth-page/tasks.md#phase-1-setup","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T17:19:19.547126148+01:00","updated_at":"2025-12-08T17:29:52.773078772+01:00","closed_at":"2025-12-08T17:29:52.773078772+01:00","dependencies":[{"issue_id":"mcp-5el","depends_on_id":"mcp-9k8","type":"parent-child","created_at":"2025-12-08T17:19:19.547570322+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9","title":"Epic: Structured Tracing with plow-log","description":"Add comprehensive richly-typed structured logging/tracing to the MCP library using plow-log and plow-log-async.\n\nSpec: specs/003-structured-tracing/spec.md\nPlan: specs/003-structured-tracing/plan.md\nTasks: specs/003-structured-tracing/tasks.md\nData Model: specs/003-structured-tracing/data-model.md\n\nKey constraint: Implement composite trace types and plumbing first (skeleton), then fill in leaf traces incrementally.","status":"in_progress","priority":1,"issue_type":"epic","created_at":"2025-12-10T11:37:06.7165381+01:00","updated_at":"2025-12-10T12:08:01.973676972+01:00"}
{"id":"mcp-6k9.1","title":"Phase 1: Setup","description":"Project initialization: add plow-log dependencies, create Trace directory structure.\n\nTasks:\n- T001: Add plow-log dependencies to mcp.cabal\n- T002: Create src/MCP/Trace/ directory\n- T003: Verify dependencies resolve\n\nRef: specs/003-structured-tracing/tasks.md Phase 1","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-10T11:37:14.074275157+01:00","updated_at":"2025-12-10T12:06:29.332162176+01:00","closed_at":"2025-12-10T12:06:29.332162176+01:00","dependencies":[{"issue_id":"mcp-6k9.1","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T11:37:14.074815506+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.1.1","title":"T001: Add plow-log dependencies to mcp.cabal","description":"Add to mcp.cabal build-depends:\n- plow-log \u003e= 0.1.6 \u0026\u0026 \u003c 0.2\n- plow-log-async \u003e= 0.1.4 \u0026\u0026 \u003c 0.2\n- unliftio-core \u003e= 0.2 \u0026\u0026 \u003c 0.3\n\nFile: mcp.cabal","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:37:24.353860371+01:00","updated_at":"2025-12-10T12:11:39.22546301+01:00","closed_at":"2025-12-10T12:11:39.22546301+01:00","dependencies":[{"issue_id":"mcp-6k9.1.1","depends_on_id":"mcp-6k9.1","type":"parent-child","created_at":"2025-12-10T11:37:24.354181702+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.1.2","title":"T002: Create src/MCP/Trace/ directory","description":"[P] Create directory structure for trace modules.\n\nmkdir -p src/MCP/Trace/\n\nCan run in parallel with T003.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:37:30.401989962+01:00","updated_at":"2025-12-10T12:11:41.069389076+01:00","closed_at":"2025-12-10T12:11:41.069389076+01:00","dependencies":[{"issue_id":"mcp-6k9.1.2","depends_on_id":"mcp-6k9.1","type":"parent-child","created_at":"2025-12-10T11:37:30.403004575+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.1.3","title":"T003: Verify dependencies resolve","description":"Run 'cabal build --dry-run' to verify plow-log dependencies resolve.\n\nDepends on: T001 (mcp-6k9.1.1)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:37:38.259121078+01:00","updated_at":"2025-12-10T12:11:41.976784342+01:00","closed_at":"2025-12-10T12:11:41.976784342+01:00","dependencies":[{"issue_id":"mcp-6k9.1.3","depends_on_id":"mcp-6k9.1","type":"parent-child","created_at":"2025-12-10T11:37:38.259719024+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.1.3","depends_on_id":"mcp-6k9.1.1","type":"blocks","created_at":"2025-12-10T11:37:38.260445512+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.10","title":"Remove unused optEnableLogging from stdio-server.hs example","description":"The optEnableLogging flag is defined and parsed in examples/stdio-server.hs but never used - StdIO transport has no WAI middleware to enable. Remove the flag definition, parser, and the unused putStrLn that references it. Refs: examples/stdio-server.hs lines 43, 69-72, 127","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-10T17:05:22.953171946+01:00","updated_at":"2025-12-10T17:05:22.953171946+01:00","dependencies":[{"issue_id":"mcp-6k9.10","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T17:05:22.954521046+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.11","title":"Fix all hlint warnings (48 issues: hPutStrLn, decodeUtf8, putStrLn)","description":"Fix all 48 hlint warnings across the codebase:\n\n**src/ (6 warnings):**\n- src/MCP/Server.hs: 3x LBSC.hPutStrLn â†’ replace with plow-log tracing\n- src/MCP/Server/Auth.hs: 2x TE.decodeUtf8 â†’ use decodeUtf8' with error handling\n- src/MCP/Server/HTTP.hs: 1x TE.decodeUtf8 â†’ use decodeUtf8' with error handling\n\n**app/ (1 warning):**\n- app/Main.hs: 1x putStrLn â†’ use plow-log\n\n**examples/ (33 warnings):**\n- examples/http-server.hs: 28x putStrLn â†’ use plow-log\n- examples/stdio-server.hs: 5x putStrLn â†’ use plow-log\n\n**test/ (8 warnings):**\n- test/Trace/OAuthSpec.hs: 8x partial functions (head, !!) â†’ use safe pattern matching\n\nRun: hlint . to verify all fixed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T19:21:18.641548294+01:00","updated_at":"2025-12-10T19:28:07.404682773+01:00","closed_at":"2025-12-10T19:28:07.404682773+01:00","dependencies":[{"issue_id":"mcp-6k9.11","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T19:21:18.643141484+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2","title":"Phase 2: Foundational - Trace Type Skeleton","description":"CRITICAL: Create trace type hierarchy with composite constructors ONLY (no leaf traces). Skeleton must compile before any user story work.\n\nPhase 2A: Create skeleton trace types (T004-T009)\nPhase 2B: Thread IOTracer through existing modules (T010-T014)\n\nRef: specs/003-structured-tracing/tasks.md Phase 2\nRef: specs/003-structured-tracing/data-model.md","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-10T11:37:45.703987128+01:00","updated_at":"2025-12-10T13:34:17.524582072+01:00","closed_at":"2025-12-10T13:34:17.524582072+01:00","dependencies":[{"issue_id":"mcp-6k9.2","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T11:37:45.704290236+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.2","depends_on_id":"mcp-6k9.1","type":"blocks","created_at":"2025-12-10T11:37:45.704812989+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.1","title":"T004: Create OAuthTrace skeleton","description":"[P] Create src/MCP/Trace/OAuth.hs with:\n- OAuthTrace type (placeholder constructor only)\n- renderOAuthTrace :: OAuthTrace -\u003e Text stub\n\nIMPORTANT: No MCP imports allowed (FR-010 - future package separation)\n\nRef: specs/003-structured-tracing/data-model.md OAuthTrace section","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:37:58.581638904+01:00","updated_at":"2025-12-10T12:16:22.647875608+01:00","closed_at":"2025-12-10T12:16:22.647875608+01:00","dependencies":[{"issue_id":"mcp-6k9.2.1","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:37:58.582104273+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.10","title":"T013: Update mcp.cabal exposed-modules","description":"Update mcp.cabal exposed-modules to include:\n- MCP.Trace.Types\n- MCP.Trace.Server\n- MCP.Trace.Protocol\n- MCP.Trace.HTTP\n- MCP.Trace.StdIO\n- MCP.Trace.OAuth\n\nDepends on: T009 (all trace modules created)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:39:01.650587872+01:00","updated_at":"2025-12-10T13:31:09.770036456+01:00","closed_at":"2025-12-10T13:31:09.770036456+01:00","dependencies":[{"issue_id":"mcp-6k9.2.10","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:39:01.651092743+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.2.10","depends_on_id":"mcp-6k9.2.6","type":"blocks","created_at":"2025-12-10T11:39:01.651653887+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.11","title":"T014: Verify skeleton compiles","description":"CHECKPOINT: Run 'cabal build' to verify:\n- All trace type modules compile\n- IOTracer threaded through all entry points\n- No missing imports or type errors\n\nThis must pass before ANY user story work begins.\n\nDepends on: T010-T013 (all threading and cabal updates)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T11:39:09.552521856+01:00","updated_at":"2025-12-10T13:33:50.642009659+01:00","closed_at":"2025-12-10T13:33:50.642009659+01:00","dependencies":[{"issue_id":"mcp-6k9.2.11","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:39:09.552927589+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.2.11","depends_on_id":"mcp-6k9.2.7","type":"blocks","created_at":"2025-12-10T11:39:09.553591105+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.2","title":"T005: Create ProtocolTrace skeleton","description":"[P] Create src/MCP/Trace/Protocol.hs with:\n- ProtocolTrace type (placeholder constructor only)\n- renderProtocolTrace :: ProtocolTrace -\u003e Text stub\n\nRef: specs/003-structured-tracing/data-model.md ProtocolTrace section","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:38:09.241490437+01:00","updated_at":"2025-12-10T12:30:15.042530715+01:00","closed_at":"2025-12-10T12:30:15.042530715+01:00","dependencies":[{"issue_id":"mcp-6k9.2.2","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:38:09.241838553+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.3","title":"T006: Create ServerTrace skeleton","description":"[P] Create src/MCP/Trace/Server.hs with:\n- ServerTrace type (placeholder constructor only)\n- renderServerTrace :: ServerTrace -\u003e Text stub\n\nRef: specs/003-structured-tracing/data-model.md ServerTrace section","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:38:14.658994848+01:00","updated_at":"2025-12-10T12:36:51.020528798+01:00","closed_at":"2025-12-10T12:36:51.020528798+01:00","dependencies":[{"issue_id":"mcp-6k9.2.3","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:38:14.659306529+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.4","title":"T007: Create StdIOTrace skeleton","description":"Create src/MCP/Trace/StdIO.hs with:\n- StdIOTrace type (includes StdIOProtocol ProtocolTrace composite)\n- renderStdIOTrace :: StdIOTrace -\u003e Text stub (delegates to renderProtocolTrace)\n\nDepends on: T005 (mcp-6k9.2.2) for ProtocolTrace import\n\nRef: specs/003-structured-tracing/data-model.md StdIOTrace section","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:38:20.997423701+01:00","updated_at":"2025-12-10T12:40:35.569300248+01:00","closed_at":"2025-12-10T12:40:35.569300248+01:00","dependencies":[{"issue_id":"mcp-6k9.2.4","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:38:20.99787449+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.2.4","depends_on_id":"mcp-6k9.2.2","type":"blocks","created_at":"2025-12-10T11:38:20.998552705+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.5","title":"T008: Create HTTPTrace skeleton","description":"Create src/MCP/Trace/HTTP.hs with:\n- HTTPTrace type (includes HTTPProtocol ProtocolTrace, HTTPOAuth OAuthTrace composites)\n- renderHTTPTrace :: HTTPTrace -\u003e Text stub (delegates to sub-renders)\n\nDepends on: T004 (mcp-6k9.2.1) for OAuthTrace, T005 (mcp-6k9.2.2) for ProtocolTrace\n\nRef: specs/003-structured-tracing/data-model.md HTTPTrace section","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:38:26.892791929+01:00","updated_at":"2025-12-10T12:42:54.122738261+01:00","closed_at":"2025-12-10T12:42:54.122738261+01:00","dependencies":[{"issue_id":"mcp-6k9.2.5","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:38:26.893110916+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.2.5","depends_on_id":"mcp-6k9.2.1","type":"blocks","created_at":"2025-12-10T11:38:26.893644096+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.6","title":"T009: Create MCPTrace root type","description":"Create src/MCP/Trace/Types.hs with:\n- MCPTrace root sum type (MCPServer, MCPProtocol, MCPStdIO, MCPHttp constructors)\n- renderMCPTrace :: MCPTrace -\u003e Text (delegates to subsystem renders)\n- Re-exports of all trace types and render functions\n\nDepends on: T006-T008 (all subsystem trace types)\n\nRef: specs/003-structured-tracing/data-model.md MCPTrace section","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:38:34.420857823+01:00","updated_at":"2025-12-10T12:50:59.093916511+01:00","closed_at":"2025-12-10T12:50:59.093916511+01:00","dependencies":[{"issue_id":"mcp-6k9.2.6","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:38:34.421189829+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.2.6","depends_on_id":"mcp-6k9.2.3","type":"blocks","created_at":"2025-12-10T11:38:34.421761375+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.7","title":"T010: Thread IOTracer into MCP.Server.StdIO","description":"Modify src/MCP/Server/StdIO.hs:\n- Add IOTracer StdIOTrace parameter to runServer function signature\n- Store tracer in reader environment or pass through\n\nDepends on: T007 (StdIOTrace exists)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:38:40.471409801+01:00","updated_at":"2025-12-10T12:56:23.618443435+01:00","closed_at":"2025-12-10T12:56:23.618443435+01:00","dependencies":[{"issue_id":"mcp-6k9.2.7","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:38:40.471753408+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.2.7","depends_on_id":"mcp-6k9.2.4","type":"blocks","created_at":"2025-12-10T11:38:40.47229972+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.8","title":"T011: Thread IOTracer into MCP.Server.HTTP","description":"Modify src/MCP/Server/HTTP.hs:\n- Add IOTracer HTTPTrace parameter to runServerHTTP function signature\n- Adapt tracer with contramap HTTPOAuth for OAuth handlers\n- Store tracer in server state/environment\n\nDepends on: T008 (HTTPTrace exists)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:38:46.002203721+01:00","updated_at":"2025-12-10T13:04:02.426570351+01:00","closed_at":"2025-12-10T13:04:02.426570351+01:00","dependencies":[{"issue_id":"mcp-6k9.2.8","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:38:46.002530724+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.2.8","depends_on_id":"mcp-6k9.2.5","type":"blocks","created_at":"2025-12-10T11:38:46.003103041+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.2.9","title":"T012: Thread IOTracer into MCP.Server.Auth","description":"Modify src/MCP/Server/Auth.hs:\n- Add IOTracer OAuthTrace parameter to OAuth handler functions\n- Pass tracer through OAuth flow functions\n\nNote: Auth module receives already-adapted OAuthTrace tracer from HTTP layer\n\nDepends on: T004 (OAuthTrace exists)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:38:54.672015401+01:00","updated_at":"2025-12-10T13:19:40.527132039+01:00","closed_at":"2025-12-10T13:19:40.527132039+01:00","dependencies":[{"issue_id":"mcp-6k9.2.9","depends_on_id":"mcp-6k9.2","type":"parent-child","created_at":"2025-12-10T11:38:54.672590274+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.2.9","depends_on_id":"mcp-6k9.2.1","type":"blocks","created_at":"2025-12-10T11:38:54.673454904+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3","title":"Phase 3: User Story 1 - Library Consumer Enables Tracing (P1 MVP)","description":"MVP: Library consumers can enable tracing with \u003c5 lines of setup code.\n\nGoal: Basic tracing works for any MCP server\nTest: Initialize server with tracer, make request, verify trace output\n\nAcceptance:\n- contramap renderMCPTrace produces IOTracer MCPTrace\n- MCP operations emit trace events\n- Rendered output includes contextual info\n\nRef: specs/003-structured-tracing/spec.md User Story 1","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-10T11:39:19.139321489+01:00","updated_at":"2025-12-10T16:14:01.41797397+01:00","closed_at":"2025-12-10T16:14:01.41797397+01:00","dependencies":[{"issue_id":"mcp-6k9.3","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T11:39:19.139964606+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3","depends_on_id":"mcp-6k9.2","type":"blocks","created_at":"2025-12-10T11:39:19.140894887+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.1","title":"T015: Add ServerTrace leaf constructors","description":"[P][US1] Add leaf constructors to src/MCP/Trace/Server.hs:\n- ServerInit { serverName, serverVersion }\n- ServerShutdown\n- ServerInitialized { clientInfo }\n- ServerCapabilityNegotiation { negotiatedCapabilities }\n- ServerStateChange { fromState, toState }\n\nRef: specs/003-structured-tracing/data-model.md ServerTrace","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:39:27.845774151+01:00","updated_at":"2025-12-10T13:37:31.815288711+01:00","closed_at":"2025-12-10T13:37:31.815288711+01:00","dependencies":[{"issue_id":"mcp-6k9.3.1","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T11:39:27.846376961+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.10","title":"Refactor: Add StdIOServer composite constructor to StdIOTrace","description":"Add StdIOServer ServerTrace composite constructor to StdIOTrace. Remove redundant StdIOServerInit/StdIOServerShutdown leaves. Update renderStdIOTrace to delegate to renderServerTrace. This enables proper contramap threading per FR-006. Refs: specs/003-structured-tracing/data-model.md, src/MCP/Trace/StdIO.hs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T14:44:32.990406819+01:00","updated_at":"2025-12-10T14:51:18.247134421+01:00","closed_at":"2025-12-10T14:51:18.247134421+01:00","dependencies":[{"issue_id":"mcp-6k9.3.10","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T14:44:32.992925062+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.11","title":"Refactor: Add HTTPServer composite constructor to HTTPTrace","description":"Add HTTPServer ServerTrace composite constructor to HTTPTrace. Update renderHTTPTrace to delegate to renderServerTrace. This enables proper contramap threading per FR-006. Refs: specs/003-structured-tracing/data-model.md, src/MCP/Trace/HTTP.hs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T14:44:39.108970434+01:00","updated_at":"2025-12-10T14:55:08.1676357+01:00","closed_at":"2025-12-10T14:55:08.1676357+01:00","dependencies":[{"issue_id":"mcp-6k9.3.11","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T14:44:39.110707227+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.12","title":"Fix: Thread contramapped ServerTrace tracer in StdIO transport","description":"Update StdIO transport to contramap via StdIOServer when creating ServerConfig. Replace nullIOTracer with proper threading: let serverTracer = contramap StdIOServer stdioTracer. This eliminates the nullIOTracer cop-out. Depends on mcp-6k9.3.10. Refs: src/MCP/Server/StdIO.hs runServer","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T14:46:31.834727366+01:00","updated_at":"2025-12-10T14:57:38.35234642+01:00","closed_at":"2025-12-10T14:57:38.35234642+01:00","dependencies":[{"issue_id":"mcp-6k9.3.12","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T14:46:31.836512761+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3.12","depends_on_id":"mcp-6k9.3.10","type":"blocks","created_at":"2025-12-10T14:46:57.845569671+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.13","title":"Fix: Thread contramapped ServerTrace tracer in HTTP transport","description":"Update HTTP transport to contramap via HTTPServer when creating ServerConfig. Replace nullIOTracer with proper threading: let serverTracer = contramap HTTPServer httpTracer. Also thread OAuthTrace via contramap HTTPOAuth to auth module. Depends on mcp-6k9.3.11. Refs: src/MCP/Server/HTTP.hs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T14:46:34.495496523+01:00","updated_at":"2025-12-10T15:13:26.046328195+01:00","closed_at":"2025-12-10T15:13:26.046328195+01:00","dependencies":[{"issue_id":"mcp-6k9.3.13","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T14:46:34.497721461+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3.13","depends_on_id":"mcp-6k9.3.11","type":"blocks","created_at":"2025-12-10T14:46:57.85978575+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.14","title":"Refactor: Remove httpTracer field from HTTPServerConfig, keep as runServerHTTP argument","description":"Remove httpTracer field from HTTPServerConfig. Keep tracer as explicit argument to runServerHTTP.\n\nDesign principle (FR-005): Tracers MUST be passed as explicit function arguments, NEVER stored in config structs. This avoids two sources of truth and allows callers to explicitly contramap their tracers for callees.\n\nCurrent problem:\n- HTTPServerConfig has httpTracer field\n- runServerHTTP also takes tracer parameter  \n- Implementation overwrites config field with parameter - confusing API\n- Example uses nullIOTracer in config with misleading comment\n\nRequired changes:\n1. Remove httpTracer field from HTTPServerConfig\n2. Keep tracer parameter in runServerHTTP (already correct pattern)\n3. Update all code that sets httpTracer in config\n4. Update example to NOT set httpTracer in config\n\nPattern: Application creates tracer, library threads it as argument. Clean composition.\n\nRefs: src/MCP/Server/HTTP.hs, examples/http-server.hs, specs/003-structured-tracing/spec.md FR-005","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T15:33:35.625077343+01:00","updated_at":"2025-12-10T15:48:54.821474623+01:00","closed_at":"2025-12-10T15:48:54.821474623+01:00","dependencies":[{"issue_id":"mcp-6k9.3.14","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T15:33:35.626568569+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.15","title":"Refactor: Remove configTracer field from ServerConfig, thread via argument","description":"Remove configTracer field from ServerConfig. Thread ServerTrace tracer explicitly via function arguments.\n\nDesign principle (FR-005): Tracers MUST be threaded explicitly via function arguments or MonadReader environments, NEVER stored in config structs alongside unrelated configuration.\n\nCurrent problem:\n- ServerConfig has configTracer :: IOTracer ServerTrace field\n- This mixes tracer with unrelated config (handles, server info, capabilities)\n- Violates clean composition principle\n\nRequired changes:\n1. Remove configTracer field from ServerConfig in src/MCP/Server.hs\n2. Thread IOTracer ServerTrace as explicit argument where needed\n3. Update callers that create ServerConfig (StdIO, HTTP transports)\n4. Update code that reads configTracer to use threaded argument\n\nThe ServerConfig should only contain: configInput, configOutput, configServerInfo, configCapabilities.\n\nRefs: src/MCP/Server.hs ServerConfig, specs/003-structured-tracing/spec.md FR-005","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T15:42:09.546266559+01:00","updated_at":"2025-12-10T16:02:39.22512231+01:00","closed_at":"2025-12-10T16:02:39.22512231+01:00","dependencies":[{"issue_id":"mcp-6k9.3.15","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T15:42:09.547872004+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.2","title":"T016: Add ProtocolTrace leaf constructors","description":"[P][US1] Add leaf constructors to src/MCP/Trace/Protocol.hs:\n- ProtocolRequestReceived { requestId, method }\n- ProtocolResponseSent { requestId, isError }\n- ProtocolNotificationReceived { method }\n- ProtocolParseError { errorMessage, rawInput }\n- ProtocolMethodNotFound { requestId, method }\n- ProtocolInvalidParams { requestId, method, errorDetail }\n\nRef: specs/003-structured-tracing/data-model.md ProtocolTrace","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:39:34.771033279+01:00","updated_at":"2025-12-10T13:40:53.428903456+01:00","closed_at":"2025-12-10T13:40:53.428903456+01:00","dependencies":[{"issue_id":"mcp-6k9.3.2","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T11:39:34.77137625+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.3","title":"T017: Implement renderServerTrace","description":"[US1] Implement renderServerTrace for all constructors in src/MCP/Trace/Server.hs\n\nPattern match all ServerTrace constructors, produce human-readable Text output.\nExample: '[Server] Initialized (client: Claude Desktop)'\n\nDepends on: T015","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:39:42.362609161+01:00","updated_at":"2025-12-10T13:43:51.152766751+01:00","closed_at":"2025-12-10T13:43:51.152766751+01:00","dependencies":[{"issue_id":"mcp-6k9.3.3","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T11:39:42.362980067+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3.3","depends_on_id":"mcp-6k9.3.1","type":"blocks","created_at":"2025-12-10T11:39:42.363581456+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.4","title":"T018: Implement renderProtocolTrace","description":"[US1] Implement renderProtocolTrace for all constructors in src/MCP/Trace/Protocol.hs\n\nPattern match all ProtocolTrace constructors, produce human-readable Text output.\nExample: '[Protocol] Request 1: tools/list'\n\nDepends on: T016","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:39:48.564725994+01:00","updated_at":"2025-12-10T13:48:39.370679736+01:00","closed_at":"2025-12-10T13:48:39.370679736+01:00","dependencies":[{"issue_id":"mcp-6k9.3.4","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T11:39:48.565063851+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3.4","depends_on_id":"mcp-6k9.3.2","type":"blocks","created_at":"2025-12-10T11:39:48.565651017+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.5","title":"T019: Update renderMCPTrace delegation","description":"[US1] Update renderMCPTrace in src/MCP/Trace/Types.hs to properly delegate:\n\nrenderMCPTrace = \\case\n    MCPServer t   -\u003e renderServerTrace t\n    MCPProtocol t -\u003e renderProtocolTrace t\n    MCPStdIO t    -\u003e renderStdIOTrace t\n    MCPHttp t     -\u003e renderHTTPTrace t\n\nDepends on: T017, T018","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:40:01.412444676+01:00","updated_at":"2025-12-10T13:51:55.381118012+01:00","closed_at":"2025-12-10T13:51:55.381118012+01:00","dependencies":[{"issue_id":"mcp-6k9.3.5","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T11:40:01.412788725+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3.5","depends_on_id":"mcp-6k9.3.3","type":"blocks","created_at":"2025-12-10T11:40:01.413381505+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.6","title":"T020: Add traceWith calls for server init/shutdown","description":"[US1] Add traceWith calls in src/MCP/Server.hs:\n- Trace ServerInit at server startup\n- Trace ServerShutdown at cleanup\n- Trace ServerInitialized after client handshake\n- Trace ServerCapabilityNegotiation after capability exchange\n\nUse: traceWith tracer $ ServerInit {...}\n\nDepends on: T017 (render implemented)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:40:09.702079539+01:00","updated_at":"2025-12-10T13:59:14.807854667+01:00","closed_at":"2025-12-10T13:59:14.807854667+01:00","dependencies":[{"issue_id":"mcp-6k9.3.6","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T11:40:09.702420442+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3.6","depends_on_id":"mcp-6k9.3.3","type":"blocks","created_at":"2025-12-10T11:40:09.703046683+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.6.1","title":"Add IOTracer ServerTrace to ServerConfig for complete lifecycle tracing","description":"Complete server lifecycle tracing by adding IOTracer ServerTrace to ServerConfig. T020 implemented ServerInit/ServerShutdown at transport layer. ServerInitialized/ServerCapabilityNegotiation require tracer in MCPServerM monad (accessible via Reader). Add configTracer field to ServerConfig (src/MCP/Server.hs:59-64), update StdIO/HTTP transports to pass contramap'd tracer, update examples/tests with nullIOTracer, add traceWith calls in handleInitialize for ServerInitialized (with client name) and ServerCapabilityNegotiation (with capability list). Benefits: transport-agnostic server code, clean emission pattern, type-safe threading. Refs: specs/003-structured-tracing/data-model.md ServerTrace, ServerConfig src/MCP/Server.hs:59-64, handleInitialize src/MCP/Server/StdIO.hs:224-247","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-10T14:04:53.043097979+01:00","updated_at":"2025-12-10T14:13:09.208363829+01:00","closed_at":"2025-12-10T14:13:09.208363829+01:00","dependencies":[{"issue_id":"mcp-6k9.3.6.1","depends_on_id":"mcp-6k9.3.6","type":"parent-child","created_at":"2025-12-10T14:04:53.045196281+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.7","title":"T021: Add traceWith calls for protocol handling","description":"[US1] Add traceWith calls for JSON-RPC handling:\n- Trace ProtocolRequestReceived when request arrives\n- Trace ProtocolResponseSent when response sent\n- Trace ProtocolParseError on parse failures\n- Trace ProtocolMethodNotFound for unknown methods\n\nLocation: protocol handling code in MCP.Server or transport modules\n\nDepends on: T018 (render implemented)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:40:21.331286394+01:00","updated_at":"2025-12-10T15:27:41.04095476+01:00","closed_at":"2025-12-10T15:27:41.04095476+01:00","dependencies":[{"issue_id":"mcp-6k9.3.7","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T11:40:21.342534732+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3.7","depends_on_id":"mcp-6k9.3.4","type":"blocks","created_at":"2025-12-10T11:40:21.345314288+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.8","title":"T022: Update example executables with tracing","description":"[US1] Update examples to demonstrate tracing setup:\n\nexamples/http-server.hs:\n  withAsyncHandleTracer stdout 1000 $ \\textTracer -\u003e do\n    let httpTracer = contramap (renderMCPTrace . MCPHttp) textTracer\n    runServerHTTP config httpTracer\n\napp/Main.hs: Similar for StdIO (use stderr to avoid protocol interference)\n\nDepends on: T019 (renderMCPTrace working)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:40:30.687527867+01:00","updated_at":"2025-12-10T16:06:20.611336152+01:00","closed_at":"2025-12-10T16:06:20.611336152+01:00","dependencies":[{"issue_id":"mcp-6k9.3.8","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T11:40:30.687862642+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3.8","depends_on_id":"mcp-6k9.3.5","type":"blocks","created_at":"2025-12-10T11:40:30.688463297+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.3.9","title":"T023: Verify SC-001 - Setup in \u003c5 lines","description":"[US1] CHECKPOINT: Verify Success Criterion SC-001\n\nTest that tracing can be enabled in \u003c5 lines per quickstart.md:\n1. withAsyncHandleTracer\n2. contramap renderMCPTrace\n3. Pass to server\n\nRun example, make request, verify trace output appears.\n\nDepends on: T022","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T11:40:37.989817739+01:00","updated_at":"2025-12-10T16:10:13.567151129+01:00","closed_at":"2025-12-10T16:10:13.567151129+01:00","dependencies":[{"issue_id":"mcp-6k9.3.9","depends_on_id":"mcp-6k9.3","type":"parent-child","created_at":"2025-12-10T11:40:37.99013972+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.3.9","depends_on_id":"mcp-6k9.3.8","type":"blocks","created_at":"2025-12-10T11:40:37.990750596+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4","title":"Phase 4: User Story 2 - Trace HTTP Transport Operations (P2)","description":"HTTP-specific operations (OAuth, routing, auth) emit traces.\n\nGoal: HTTP and OAuth tracing works\nTest: Run HTTP server, perform OAuth flow, verify traces appear\n\nAcceptance:\n- OAuth flow traces: registration, authorization, login, token\n- HTTP request traces include endpoint, auth status\n\nRef: specs/003-structured-tracing/spec.md User Story 2","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-10T11:40:48.88563172+01:00","updated_at":"2025-12-10T18:55:25.328569174+01:00","closed_at":"2025-12-10T18:55:25.328569174+01:00","dependencies":[{"issue_id":"mcp-6k9.4","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T11:40:48.885966627+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.4","depends_on_id":"mcp-6k9.2","type":"blocks","created_at":"2025-12-10T11:40:48.886568993+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.1","title":"T024: Add OAuthTrace leaf constructors","description":"[P][US2] Add leaf constructors to src/MCP/Trace/OAuth.hs:\n- OAuthClientRegistration { clientId, clientName }\n- OAuthAuthorizationRequest { clientId, scopes, hasState }\n- OAuthLoginPageServed { sessionId }\n- OAuthLoginAttempt { username, success }\n- OAuthAuthorizationGranted/Denied\n- OAuthTokenExchange { grantType, success }\n- OAuthTokenRefresh { success }\n- OAuthSessionExpired { sessionId }\n- OAuthValidationError { errorType, errorDetail }\n\nRef: specs/003-structured-tracing/data-model.md OAuthTrace","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:40:59.524505427+01:00","updated_at":"2025-12-10T17:13:41.000878669+01:00","closed_at":"2025-12-10T17:13:41.000878669+01:00","dependencies":[{"issue_id":"mcp-6k9.4.1","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T11:40:59.524837214+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.10","title":"Fix unsafePerformIO tracing violations in Auth.hs","description":"## Problem\n\n`src/MCP/Server/Auth.hs` has 3 violations of FR-011 (introduced during T028):\n\n1. **Line 72**: imports `unsafePerformIO`\n2. **Line 384**: `validateCodeVerifier` uses `unsafePerformIO` to trace\n3. **Lines 421, 426**: `validateCredential` uses `unsafePerformIO` to trace\n\nAdditionally, traces build pre-formatted strings at call sites instead of capturing richly-typed data:\n```haskell\n-- BAD: message built at call site\nOAuthValidationError \"pkce\" (\"PKCE validation: \" \u003c\u003e validationResult)\n```\n\n## Required Fix\n\n1. **Lift to MonadIO**: Change `validateCodeVerifier` and `validateCredential` to `MonadIO m =\u003e ... -\u003e m Bool`\n\n2. **Richly-typed traces**: Replace string-building with typed constructors:\n   ```haskell\n   -- GOOD: typed data, render function formats\n   data OAuthTrace\n     = OAuthPKCEValidation Text Text Bool  -- verifier, challenge, isValid\n     | OAuthLoginAttempt Text Bool          -- username, success\n   ```\n\n3. **Update render function**: `renderOAuthTrace` formats the typed data\n\n4. **Update call sites**: All callers must handle monadic return\n\n5. **Remove import**: Delete `import System.IO.Unsafe (unsafePerformIO)`\n\nRefs: src/MCP/Server/Auth.hs, specs/003-structured-tracing/spec.md FR-011","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-10T18:06:16.39465708+01:00","updated_at":"2025-12-10T18:11:17.650694044+01:00","closed_at":"2025-12-10T18:11:17.650694044+01:00","dependencies":[{"issue_id":"mcp-6k9.4.10","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T18:06:16.396214295+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.2","title":"T025: Add HTTPTrace leaf constructors","description":"[P][US2] Add leaf constructors to src/MCP/Trace/HTTP.hs:\n- HTTPServerStarting { port, baseUrl }\n- HTTPServerStarted\n- HTTPRequestReceived { path, method, hasAuth }\n- HTTPAuthRequired { path }\n- HTTPAuthSuccess { userId }\n- HTTPAuthFailure { reason }\n\nNote: HTTPProtocol and HTTPOAuth composites already exist from skeleton\n\nRef: specs/003-structured-tracing/data-model.md HTTPTrace","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:41:07.447980185+01:00","updated_at":"2025-12-10T17:24:03.947713966+01:00","closed_at":"2025-12-10T17:24:03.947713966+01:00","dependencies":[{"issue_id":"mcp-6k9.4.2","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T11:41:07.448298888+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.3","title":"T026: Implement renderOAuthTrace","description":"[US2] Implement renderOAuthTrace for all constructors in src/MCP/Trace/OAuth.hs\n\nPattern match all OAuthTrace constructors, produce human-readable Text output.\nExample: '[OAuth] Client registered: abc123 (My App)'\n\nIMPORTANT: No MCP-specific text in output (FR-010)\n\nDepends on: T024","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:41:14.335486262+01:00","updated_at":"2025-12-10T17:29:41.932714289+01:00","closed_at":"2025-12-10T17:29:41.932714289+01:00","dependencies":[{"issue_id":"mcp-6k9.4.3","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T11:41:14.335836581+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.4.3","depends_on_id":"mcp-6k9.4.1","type":"blocks","created_at":"2025-12-10T11:41:14.336446421+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.4","title":"T027: Implement renderHTTPTrace","description":"[US2] Implement renderHTTPTrace for all constructors in src/MCP/Trace/HTTP.hs\n\nPattern match all HTTPTrace constructors:\n- Leaf constructors: produce direct output\n- HTTPProtocol t: delegate to renderProtocolTrace\n- HTTPOAuth t: delegate to renderOAuthTrace\n\nExample: '[HTTP] Server starting on port 8080'\n\nDepends on: T025, T026","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:41:22.134644812+01:00","updated_at":"2025-12-10T17:44:47.110858123+01:00","closed_at":"2025-12-10T17:44:47.110858123+01:00","dependencies":[{"issue_id":"mcp-6k9.4.4","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T11:41:22.134986731+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.4.4","depends_on_id":"mcp-6k9.4.2","type":"blocks","created_at":"2025-12-10T11:41:22.13564113+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.5","title":"T028: Add traceWith calls in OAuth handlers","description":"[US2] Add traceWith calls in src/MCP/Server/Auth.hs:\n- OAuthClientRegistration on /register\n- OAuthAuthorizationRequest on /authorize\n- OAuthLoginPageServed when serving login\n- OAuthLoginAttempt on form submission\n- OAuthAuthorizationGranted/Denied\n- OAuthTokenExchange on /token\n- OAuthValidationError on failures\n\nDepends on: T026 (render implemented)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:41:37.126903037+01:00","updated_at":"2025-12-10T17:56:28.344174004+01:00","closed_at":"2025-12-10T17:56:28.344174004+01:00","dependencies":[{"issue_id":"mcp-6k9.4.5","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T11:41:37.127226117+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.4.5","depends_on_id":"mcp-6k9.4.3","type":"blocks","created_at":"2025-12-10T11:41:37.127875971+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.6","title":"T029: Add traceWith calls in HTTP server","description":"[US2] Add traceWith calls in src/MCP/Server/HTTP.hs:\n- HTTPServerStarting at startup\n- HTTPServerStarted when listening\n- HTTPRequestReceived for incoming requests\n- HTTPAuthRequired when auth missing\n- HTTPAuthSuccess/Failure on auth result\n\nDepends on: T027 (render implemented)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:41:43.080591109+01:00","updated_at":"2025-12-10T18:40:51.335372181+01:00","closed_at":"2025-12-10T18:40:51.335372181+01:00","dependencies":[{"issue_id":"mcp-6k9.4.6","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T11:41:43.080935631+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.4.6","depends_on_id":"mcp-6k9.4.4","type":"blocks","created_at":"2025-12-10T11:41:43.081580975+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.7","title":"T030: Verify OAuth MCP-independence (FR-010)","description":"[US2] Verify FR-010 compliance:\n\nCheck src/MCP/Trace/OAuth.hs:\n- NO imports of MCP.* modules\n- NO MCP-specific terminology in type names\n- NO MCP references in renderOAuthTrace output\n\nThis enables future package separation.\n\nDepends on: T026","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T11:41:51.03297472+01:00","updated_at":"2025-12-10T17:35:07.868884299+01:00","closed_at":"2025-12-10T17:35:07.868884299+01:00","dependencies":[{"issue_id":"mcp-6k9.4.7","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T11:41:51.033531248+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.4.7","depends_on_id":"mcp-6k9.4.3","type":"blocks","created_at":"2025-12-10T11:41:51.034644686+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.8","title":"T031: Verify SC-003 - OAuth flow traces","description":"[US2] CHECKPOINT: Verify Success Criterion SC-003\n\nTest OAuth flow produces traces for each major step:\n1. Start HTTP server with tracing\n2. Perform client registration\n3. Do authorization flow\n4. Exchange token\n\nVerify traces appear for: registration, authorization, token exchange\n\nDepends on: T028, T029","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T11:41:58.623332629+01:00","updated_at":"2025-12-10T18:48:01.587913595+01:00","closed_at":"2025-12-10T18:48:01.587913595+01:00","dependencies":[{"issue_id":"mcp-6k9.4.8","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T11:41:58.623684807+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.4.8","depends_on_id":"mcp-6k9.4.5","type":"blocks","created_at":"2025-12-10T11:41:58.624343944+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.4.9","title":"Add OAuthTrace parameter to Auth module functions","description":"Update MCP.Server.Auth functions to accept IOTracer OAuthTrace parameter. Add traceWith calls for OAuth events (client registration, authorization, login, token exchange). Auth module stays MCP-independent per FR-010. Refs: src/MCP/Server/Auth.hs, specs/003-structured-tracing/data-model.md OAuthTrace","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T14:46:44.535960034+01:00","updated_at":"2025-12-10T18:52:59.849907442+01:00","closed_at":"2025-12-10T18:52:59.849907442+01:00","dependencies":[{"issue_id":"mcp-6k9.4.9","depends_on_id":"mcp-6k9.4","type":"parent-child","created_at":"2025-12-10T14:46:44.537508049+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.5","title":"Phase 5: User Story 3 - Trace StdIO Transport Operations (P3)","description":"StdIO transport operations (message I/O, parsing) emit traces.\n\nGoal: StdIO tracing works\nTest: Run StdIO server, send JSON-RPC via stdin, verify traces appear\n\nAcceptance:\n- Message receipt traces\n- Parse error traces with context\n\nRef: specs/003-structured-tracing/spec.md User Story 3","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-10T11:42:15.0490103+01:00","updated_at":"2025-12-10T19:19:46.870130385+01:00","closed_at":"2025-12-10T19:19:46.870130385+01:00","dependencies":[{"issue_id":"mcp-6k9.5","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T11:42:15.049336117+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.5","depends_on_id":"mcp-6k9.2","type":"blocks","created_at":"2025-12-10T11:42:15.050178333+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.5.1","title":"T032: Add StdIOTrace leaf constructors","description":"[P][US3] Add leaf constructors to src/MCP/Trace/StdIO.hs:\n- StdIOMessageReceived { messageSize }\n- StdIOMessageSent { messageSize }\n- StdIOReadError { errorMessage }\n- StdIOEOF\n\nNote: StdIOProtocol composite already exists from skeleton\n\nRef: specs/003-structured-tracing/data-model.md StdIOTrace","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:42:22.209546311+01:00","updated_at":"2025-12-10T18:57:55.523621874+01:00","closed_at":"2025-12-10T18:57:55.523621874+01:00","dependencies":[{"issue_id":"mcp-6k9.5.1","depends_on_id":"mcp-6k9.5","type":"parent-child","created_at":"2025-12-10T11:42:22.210130618+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.5.2","title":"T033: Implement renderStdIOTrace","description":"[US3] Implement renderStdIOTrace for all constructors in src/MCP/Trace/StdIO.hs\n\nPattern match all StdIOTrace constructors:\n- Leaf constructors: produce direct output\n- StdIOProtocol t: delegate to renderProtocolTrace\n\nExample: '[StdIO] Message received (1024 bytes)'\n\nDepends on: T032","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:42:32.687238296+01:00","updated_at":"2025-12-10T19:00:20.753066382+01:00","closed_at":"2025-12-10T19:00:20.753066382+01:00","dependencies":[{"issue_id":"mcp-6k9.5.2","depends_on_id":"mcp-6k9.5","type":"parent-child","created_at":"2025-12-10T11:42:32.687571845+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.5.2","depends_on_id":"mcp-6k9.5.1","type":"blocks","created_at":"2025-12-10T11:42:32.688309826+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.5.3","title":"T034: Add traceWith calls in StdIO message handling","description":"[US3] Add traceWith calls in src/MCP/Server/StdIO.hs:\n- StdIOMessageReceived when message read from stdin\n- StdIOMessageSent when response written to stdout\n- Wrap protocol traces with StdIOProtocol\n\nDepends on: T033 (render implemented)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:42:38.87088146+01:00","updated_at":"2025-12-10T19:09:17.574467131+01:00","closed_at":"2025-12-10T19:09:17.574467131+01:00","dependencies":[{"issue_id":"mcp-6k9.5.3","depends_on_id":"mcp-6k9.5","type":"parent-child","created_at":"2025-12-10T11:42:38.871436672+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.5.3","depends_on_id":"mcp-6k9.5.2","type":"blocks","created_at":"2025-12-10T11:42:38.872296438+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.5.4","title":"T035: Add traceWith for parse errors and EOF","description":"[US3] Add traceWith calls in src/MCP/Server/StdIO.hs:\n- StdIOReadError when read fails\n- StdIOEOF when stdin closes\n\nEnsure error traces are self-contained (SC-004)\n\nDepends on: T033","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:42:50.24016703+01:00","updated_at":"2025-12-10T19:19:33.320709842+01:00","closed_at":"2025-12-10T19:19:33.320709842+01:00","dependencies":[{"issue_id":"mcp-6k9.5.4","depends_on_id":"mcp-6k9.5","type":"parent-child","created_at":"2025-12-10T11:42:50.240469503+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.5.4","depends_on_id":"mcp-6k9.5.2","type":"blocks","created_at":"2025-12-10T11:42:50.241157509+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.5.5","title":"T036: Verify StdIO traces to stderr","description":"[US3] CHECKPOINT: Verify StdIO traces go to stderr\n\nStdout is reserved for JSON-RPC protocol messages.\nTraces MUST go to stderr to avoid interference.\n\nTest: Run StdIO server, verify traces appear on stderr only.\n\nDepends on: T034, T035","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T11:42:56.933897686+01:00","updated_at":"2025-12-10T19:15:40.614154507+01:00","closed_at":"2025-12-10T19:15:40.614154507+01:00","dependencies":[{"issue_id":"mcp-6k9.5.5","depends_on_id":"mcp-6k9.5","type":"parent-child","created_at":"2025-12-10T11:42:56.934231139+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.5.5","depends_on_id":"mcp-6k9.5.3","type":"blocks","created_at":"2025-12-10T11:42:56.934938119+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.6","title":"Phase 6: User Story 4 - Selective Trace Filtering (P4)","description":"Developers can filter traces by subsystem using filterTracer.\n\nGoal: Trace filtering works\nTest: Create filtered tracer for OAuth-only, verify only OAuth traces pass\n\nAcceptance:\n- filterTracer with predicate works\n- Can filter to any subsystem\n\nRef: specs/003-structured-tracing/spec.md User Story 4","status":"open","priority":4,"issue_type":"epic","created_at":"2025-12-10T11:43:04.740593492+01:00","updated_at":"2025-12-10T11:43:04.740593492+01:00","dependencies":[{"issue_id":"mcp-6k9.6","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T11:43:04.741023228+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.6","depends_on_id":"mcp-6k9.2","type":"blocks","created_at":"2025-12-10T11:43:04.741703754+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.6.1","title":"T037: Add filter predicate helpers","description":"[P][US4] Add helper predicates to src/MCP/Trace/Types.hs:\n\nisOAuthTrace :: MCPTrace -\u003e Bool\nisOAuthTrace (MCPHttp (HTTPOAuth _)) = True\nisOAuthTrace _ = False\n\nisErrorTrace :: MCPTrace -\u003e Bool\n-- Match all error constructors\n\nisServerTrace, isProtocolTrace, isHTTPTrace, isStdIOTrace :: MCPTrace -\u003e Bool\n\nExport these for consumer use with filterTracer","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:43:14.973779068+01:00","updated_at":"2025-12-10T19:23:18.07962511+01:00","closed_at":"2025-12-10T19:23:18.07962511+01:00","dependencies":[{"issue_id":"mcp-6k9.6.1","depends_on_id":"mcp-6k9.6","type":"parent-child","created_at":"2025-12-10T11:43:14.974345979+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.6.2","title":"T038: Document filtering in quickstart.md","description":"[US4] Update specs/003-structured-tracing/quickstart.md with filtering examples:\n\n- OAuth-only filter example\n- Error-only filter example\n- Combined filters example\n- Usage with filterTracer\n\nDepends on: T037","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-10T11:43:21.170503342+01:00","updated_at":"2025-12-10T11:43:21.170503342+01:00","dependencies":[{"issue_id":"mcp-6k9.6.2","depends_on_id":"mcp-6k9.6","type":"parent-child","created_at":"2025-12-10T11:43:21.170845429+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.6.2","depends_on_id":"mcp-6k9.6.1","type":"blocks","created_at":"2025-12-10T11:43:21.1715336+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.6.3","title":"T039: Add filtering example to executables","description":"[US4] Add filtering example to examples/http-server.hs:\n\nShow how to use filterTracer with isOAuthTrace:\n  let oauthOnlyTracer = filterTracer isOAuthTrace mcpTracer\n\nOr add as command-line option.\n\nDepends on: T037","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-10T11:43:27.302690851+01:00","updated_at":"2025-12-10T11:43:27.302690851+01:00","dependencies":[{"issue_id":"mcp-6k9.6.3","depends_on_id":"mcp-6k9.6","type":"parent-child","created_at":"2025-12-10T11:43:27.303051961+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.6.3","depends_on_id":"mcp-6k9.6.1","type":"blocks","created_at":"2025-12-10T11:43:27.303780224+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.6.4","title":"T040: Verify SC-006 - filterTracer works","description":"[US4] CHECKPOINT: Verify Success Criterion SC-006\n\nTest filterTracer with predicate:\n1. Create OAuth-only filter\n2. Run server with filtered tracer\n3. Generate mixed events (OAuth + HTTP)\n4. Verify only OAuth traces appear\n\nDepends on: T038, T039","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-10T11:43:34.99811991+01:00","updated_at":"2025-12-10T11:43:34.99811991+01:00","dependencies":[{"issue_id":"mcp-6k9.6.4","depends_on_id":"mcp-6k9.6","type":"parent-child","created_at":"2025-12-10T11:43:34.998455145+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.6.4","depends_on_id":"mcp-6k9.6.2","type":"blocks","created_at":"2025-12-10T11:43:34.999176478+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.7","title":"Phase 7: Polish - Tests, Docs, Validation","description":"Tests, documentation, and final validation.\n\nTasks:\n- Property tests for render totality\n- Golden tests for render output stability\n- CHANGELOG update\n- Final validation of all success criteria\n\nRef: specs/003-structured-tracing/tasks.md Phase 7","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-10T11:43:43.106701203+01:00","updated_at":"2025-12-10T11:43:43.106701203+01:00","dependencies":[{"issue_id":"mcp-6k9.7","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T11:43:43.107041443+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.7","depends_on_id":"mcp-6k9.3","type":"blocks","created_at":"2025-12-10T11:43:43.107758141+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.7.1","title":"T041: Create render property tests","description":"[P] Create test/Trace/RenderSpec.hs with property tests:\n\n- All constructors rendered (totality)\n- No runtime errors on any input\n- Output is non-empty for all traces\n\nUse QuickCheck/hedgehog with Arbitrary instances","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-10T11:43:57.936150363+01:00","updated_at":"2025-12-10T11:43:57.936150363+01:00","dependencies":[{"issue_id":"mcp-6k9.7.1","depends_on_id":"mcp-6k9.7","type":"parent-child","created_at":"2025-12-10T11:43:57.936527247+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.7.2","title":"T042: Create render golden tests","description":"[P] Create test/Trace/GoldenSpec.hs with golden tests:\n\n- Snapshot test for each trace type render output\n- Ensures render output stability across versions\n- Detect accidental format changes\n\nStore golden files in test/golden/","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-10T11:44:07.420767628+01:00","updated_at":"2025-12-10T11:44:07.420767628+01:00","dependencies":[{"issue_id":"mcp-6k9.7.2","depends_on_id":"mcp-6k9.7","type":"parent-child","created_at":"2025-12-10T11:44:07.421329654+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.7.3","title":"T043: Update test/Main.hs","description":"Update test/Main.hs to include new trace tests:\n\n- Import Trace.RenderSpec\n- Import Trace.GoldenSpec\n- Add to test runner\n\nDepends on: T041, T042","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-10T11:44:13.580183476+01:00","updated_at":"2025-12-10T11:44:13.580183476+01:00","dependencies":[{"issue_id":"mcp-6k9.7.3","depends_on_id":"mcp-6k9.7","type":"parent-child","created_at":"2025-12-10T11:44:13.580511006+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.7.3","depends_on_id":"mcp-6k9.7.1","type":"blocks","created_at":"2025-12-10T11:44:13.581401152+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.7.4","title":"T044: Run full test suite","description":"Run 'cabal test' and verify all tests pass:\n\n- Existing tests still pass\n- New render property tests pass\n- New golden tests pass\n\nDepends on: T043","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-10T11:44:30.120803632+01:00","updated_at":"2025-12-10T11:44:30.120803632+01:00","dependencies":[{"issue_id":"mcp-6k9.7.4","depends_on_id":"mcp-6k9.7","type":"parent-child","created_at":"2025-12-10T11:44:30.121119312+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.7.4","depends_on_id":"mcp-6k9.7.3","type":"blocks","created_at":"2025-12-10T11:44:30.121866219+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.7.5","title":"T045: Update CHANGELOG.md","description":"[P] Update CHANGELOG.md with tracing feature:\n\n## [0.4.0.0] - YYYY-MM-DD\n\n### Added\n- Structured tracing support via plow-log\n- MCP.Trace.Types module with hierarchical trace types\n- Filter predicates for selective tracing\n- Async trace output via plow-log-async","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-10T11:44:37.433282327+01:00","updated_at":"2025-12-10T11:44:37.433282327+01:00","dependencies":[{"issue_id":"mcp-6k9.7.5","depends_on_id":"mcp-6k9.7","type":"parent-child","created_at":"2025-12-10T11:44:37.433614274+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.7.6","title":"T046: Verify all success criteria","description":"FINAL CHECKPOINT: Verify all success criteria:\n\n- SC-001: \u003c5 lines setup âœ“\n- SC-002: Request/response traces âœ“\n- SC-003: OAuth flow traces âœ“\n- SC-004: Self-contained error traces âœ“\n- SC-005: Human-readable render output âœ“\n- SC-006: filterTracer works âœ“\n\nDepends on: T044","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-10T11:44:44.254933547+01:00","updated_at":"2025-12-10T11:44:44.254933547+01:00","dependencies":[{"issue_id":"mcp-6k9.7.6","depends_on_id":"mcp-6k9.7","type":"parent-child","created_at":"2025-12-10T11:44:44.255248576+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.7.6","depends_on_id":"mcp-6k9.7.4","type":"blocks","created_at":"2025-12-10T11:44:44.256000327+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.7.7","title":"T047: Final build and lint","description":"Final quality check:\n\n1. cabal build - no warnings\n2. hlint src/ - no issues\n3. cabal test - all pass\n\nDepends on: T046","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-10T11:44:50.484649297+01:00","updated_at":"2025-12-10T11:44:50.484649297+01:00","dependencies":[{"issue_id":"mcp-6k9.7.7","depends_on_id":"mcp-6k9.7","type":"parent-child","created_at":"2025-12-10T11:44:50.484981894+01:00","created_by":"daemon"},{"issue_id":"mcp-6k9.7.7","depends_on_id":"mcp-6k9.7.6","type":"blocks","created_at":"2025-12-10T11:44:50.48573047+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.8","title":"Replace all putStrLn calls with traceWith in library, use IOTracer Text in examples","description":"ALL putStrLn calls in the library (src/) MUST be substituted by traceWith calls using appropriate trace types. putStrLn calls in examples (examples/, app/) SHOULD use the IOTracer Text tracer provided by plow-log-async via traceWith. This ensures consistent structured logging throughout the codebase. Refs: src/MCP/Server/*.hs, examples/*.hs, app/Main.hs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T16:43:10.927053048+01:00","updated_at":"2025-12-10T16:53:22.111264541+01:00","closed_at":"2025-12-10T16:53:22.111264541+01:00","dependencies":[{"issue_id":"mcp-6k9.8","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T16:43:10.928201699+01:00","created_by":"daemon"}]}
{"id":"mcp-6k9.9","title":"Remove duplicate putStrLn calls from examples that library already traces","description":"Remove putStrLn calls in examples/http-server.hs and app/Main.hs that duplicate traces already emitted by the library. Keep example-specific help text (demo credentials, curl examples). Duplicates: 'Starting MCP HTTP Server', 'Port: X', 'HTTP server configured, starting on port'. Refs: examples/http-server.hs, app/Main.hs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T16:59:36.155636687+01:00","updated_at":"2025-12-10T17:00:54.27382164+01:00","closed_at":"2025-12-10T17:00:54.27382164+01:00","dependencies":[{"issue_id":"mcp-6k9.9","depends_on_id":"mcp-6k9","type":"parent-child","created_at":"2025-12-10T16:59:36.156991666+01:00","created_by":"daemon"}]}
{"id":"mcp-6lv","title":"Phase 2: Foundational Types and Pure Functions","description":"Core types and infrastructure that MUST be complete before ANY user story.\n\n**Types** (Constitution Principle I):\n- T003: HTML content type\n- T004-T008: CredentialStore, PendingAuthorization, LoginForm, LoginError, LoginResult\n\n**State Extensions**:\n- T009: Extend OAuthState with pendingAuthorizations\n- T010: Extend OAuthConfig with credentialStore\n\n**Pure Functions** (Constitution Principle V):\n- T011-T013: mkHashedPassword, validateCredential, defaultDemoCredentialStore\n\n**Templates**:\n- T014-T015: renderLoginPage, renderErrorPage\n\n**Tests**:\n- T016-T018: Unit tests for credential validation\n\n**Files**: src/MCP/Server/HTTP.hs, src/MCP/Server/Auth.hs, test/Main.hs\n**Ref**: specs/002-login-auth-page/tasks.md#phase-2-foundational","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T17:19:31.591532583+01:00","updated_at":"2025-12-08T17:32:44.566833871+01:00","closed_at":"2025-12-08T17:32:44.566833871+01:00","dependencies":[{"issue_id":"mcp-6lv","depends_on_id":"mcp-9k8","type":"parent-child","created_at":"2025-12-08T17:19:31.591997513+01:00","created_by":"daemon"},{"issue_id":"mcp-6lv","depends_on_id":"mcp-5el","type":"blocks","created_at":"2025-12-08T17:19:31.59248263+01:00","created_by":"daemon"}]}
{"id":"mcp-6uo","title":"Debug: Login flow not completing redirect to Claude.ai","description":"## Problem\nUser successfully sees the login page when connecting from Claude.ai, enters demo/demo123 credentials, but does NOT get redirected back to Claude.ai with a working MCP connection.\n\n## Symptoms\n- Login page renders correctly (HTML served)\n- User can enter credentials (demo/demo123)\n- After submitting, redirect back to Claude.ai fails or doesnt complete the OAuth flow\n\n## Debugging Context\n\n### Files to Investigate\n1. src/MCP/Server/HTTP.hs - handleLogin function (around line 750-800)\n   - Check redirect URL construction\n   - Verify auth code generation\n   - Check Location header format\n\n2. src/MCP/Server/HTTP.hs - handleAuthorize function (around line 680-730)\n   - Verify PendingAuthorization storage\n   - Check session_id generation and cookie setting\n\n### Key Questions to Answer\n1. Is the auth code being generated correctly?\n2. Is the redirect URL being constructed properly?\n3. Is the Location header being set correctly (302 redirect)?\n4. Are cookies being handled correctly between authorize and login?\n5. Is Claude.ai receiving the redirect with the auth code?\n6. Is the token exchange (POST /token) working after redirect?\n\n### Likely Issues\n1. Redirect URL format - Claude.ai may expect specific URL format\n2. Auth code format - May need specific prefix or format\n3. Cookie domain/path issues - Session cookie may not be sent correctly\n4. CORS headers - May need specific headers for Claude.ai\n5. Token endpoint - POST /token may be failing after auth code issued\n6. handleLogin may be returning HTML error instead of redirect\n\n### Testing Steps\n1. Start server: cabal run mcp-http -- --oauth --port 8080\n2. Use browser dev tools Network tab to see:\n   - GET /authorize response (should set cookie, return login page)\n   - POST /login response (should be 302 redirect with Location header)\n   - Check if redirect actually happens\n   - Check POST /token if it gets called\n\n### Reference Files\n- Spec: specs/002-login-auth-page/spec.md\n- Contracts: specs/002-login-auth-page/contracts/login-api.md\n- Implementation: src/MCP/Server/HTTP.hs\n- Data model: specs/002-login-auth-page/data-model.md\n\n### Environment\n- Branch: 002-login-auth-page\n- Server: cabal run mcp-http -- --oauth --port 8080\n- Client: Claude.ai MCP connector\n\n## Expected Behavior\n1. User enters credentials on login page\n2. POST /login validates credentials\n3. Server generates auth code\n4. Server returns 302 redirect to Claude.ai callback URL with code\n5. Claude.ai exchanges code for token via POST /token\n6. MCP connection established\n\n## Actual Behavior\nLogin page shows, credentials accepted, but redirect to Claude.ai doesnt complete the OAuth flow.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-08T18:59:11.046981083+01:00","updated_at":"2025-12-08T19:05:53.484617796+01:00","closed_at":"2025-12-08T19:05:53.484617796+01:00"}
{"id":"mcp-7ef","title":"Phase 7: Polish and Validation","description":"Final cleanup and validation.\n\n**Tasks** (T042-T046):\n- Update http-server.hs to log demo credentials\n- Verify cabal build succeeds\n- Run cabal test\n- Run manual test with oauth-client-demo.sh\n- Update CLAUDE.md if needed\n\n**Files**: examples/http-server.hs, CLAUDE.md\n**Validation**: specs/002-login-auth-page/quickstart.md","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-08T17:20:19.446656394+01:00","updated_at":"2025-12-08T17:49:32.693133357+01:00","closed_at":"2025-12-08T17:49:32.693133357+01:00","dependencies":[{"issue_id":"mcp-7ef","depends_on_id":"mcp-9k8","type":"parent-child","created_at":"2025-12-08T17:20:19.447140413+01:00","created_by":"daemon"},{"issue_id":"mcp-7ef","depends_on_id":"mcp-qne","type":"blocks","created_at":"2025-12-08T17:20:19.447685536+01:00","created_by":"daemon"},{"issue_id":"mcp-7ef","depends_on_id":"mcp-nbp","type":"blocks","created_at":"2025-12-08T17:20:19.448233943+01:00","created_by":"daemon"},{"issue_id":"mcp-7ef","depends_on_id":"mcp-226","type":"blocks","created_at":"2025-12-08T17:20:19.448754305+01:00","created_by":"daemon"}]}
{"id":"mcp-8dn","title":"T007: Create StdIOTrace skeleton in src/MCP/Trace/StdIO.hs","description":"Create MCP.Trace.StdIO module with StdIOTrace type (includes StdIOProtocol composite) and renderStdIOTrace stub. Depends on T005 (ProtocolTrace). Ref: data-model.md StdIOTrace section.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:33:45.385562241+01:00","updated_at":"2025-12-10T12:17:29.635119925+01:00","closed_at":"2025-12-10T12:17:29.635119925+01:00"}
{"id":"mcp-8fc","title":"US2: Dynamic Client Registration Verification","description":"User Story 2: Dynamic Client Registration\n\n## Goal\nVerify DCR endpoint works correctly for Claude.ai client registration per RFC7591.\n\n## Tasks (T019-T021)\n- T019: Verify /register endpoint returns correct RFC7591 response format\n- T020: Verify ClientRegistrationResponse includes all required fields\n- T021: Document DCR endpoint in startup output\n\n## Files to Review/Modify\n- src/MCP/Server/HTTP.hs (verification)\n- examples/http-server.hs (documentation)\n\n## Note\nDCR is already implemented. This is verification and documentation.\n\n## Independent Test\nPOST /register with client metadata â†’ returns client_id\n\n## Acceptance Scenarios (from spec.md)\n1. Claude.ai can POST client metadata and receive client_id\n2. Registered client_id is accepted in authorization flow","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T15:03:36.862450647+01:00","updated_at":"2025-12-08T16:06:27.087549382+01:00","closed_at":"2025-12-08T16:06:27.087549382+01:00","dependencies":[{"issue_id":"mcp-8fc","depends_on_id":"mcp-2ij","type":"parent-child","created_at":"2025-12-08T15:03:36.862910609+01:00","created_by":"daemon"},{"issue_id":"mcp-8fc","depends_on_id":"mcp-02c","type":"blocks","created_at":"2025-12-08T15:03:36.863444313+01:00","created_by":"daemon"}]}
{"id":"mcp-9k8","title":"Login Landing Page and User Authentication","description":"Epic for 002-login-auth-page feature branch.\n\nImplement a login landing page and authentication endpoints for the mcp-http example application, replacing the current auto-approval OAuth flow with real user authentication.\n\n**Spec**: specs/002-login-auth-page/spec.md\n**Plan**: specs/002-login-auth-page/plan.md\n**Tasks**: specs/002-login-auth-page/tasks.md\n\n**User Stories**:\n- US1 (P1): User Authenticates with Credentials (MVP)\n- US2 (P2): User Views Login Context\n- US3 (P3): User Denies Authorization\n\n**Demo Credentials**: demo/demo123, admin/admin456","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T17:18:55.256834103+01:00","updated_at":"2025-12-08T17:49:32.704473351+01:00","closed_at":"2025-12-08T17:49:32.704473351+01:00"}
{"id":"mcp-c21","title":"T008: Create HTTPTrace skeleton in src/MCP/Trace/HTTP.hs","description":"Create MCP.Trace.HTTP module with HTTPTrace type (includes HTTPProtocol, HTTPOAuth composites) and renderHTTPTrace stub. Depends on T004 (OAuth), T005 (Protocol). Ref: data-model.md HTTPTrace section.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:33:55.110523326+01:00","updated_at":"2025-12-10T12:17:06.487937112+01:00","closed_at":"2025-12-10T12:17:06.487937112+01:00"}
{"id":"mcp-e7d","title":"US1: Protected Resource Discovery (MVP)","description":"User Story 1: Add MCP Server as Claude Connector\n\n## Goal\nEnable Claude.ai to discover MCP server via RFC9728 Protected Resource Metadata endpoint. The ProtectedResourceAuth combinator handles 401 responses with WWW-Authenticate header automatically.\n\n## Tasks (T015-T020)\n- T015: Add ProtectedResourceAPI type for endpoint\n- T016: Update OAuthAPI to include ProtectedResourceAPI\n- T017: Implement handleProtectedResourceMetadata handler\n- T018: Wire handler into oauthServer\n- T019: Update MCPAPI type to use ProtectedResourceAuth combinator\n- T020: Add ProtectedResourceAuthConfig to server context\n\n## Key Change\nThe combinator handles 401 + WWW-Authenticate at framework level. No manual 401 handling needed in app code.\n\n## Files to Modify\n- src/MCP/Server/HTTP.hs\n\n## Contract\n- specs/001-claude-mcp-connector/contracts/oauth-protected-resource.yaml\n- specs/001-claude-mcp-connector/contracts/mcp-401-response.yaml\n\n## Independent Test\n1. Start mcp-http with --oauth\n2. GET /.well-known/oauth-protected-resource â†’ valid RFC9728 JSON\n3. POST /mcp without auth â†’ 401 with WWW-Authenticate header (automatic)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T15:03:26.309888358+01:00","updated_at":"2025-12-08T16:02:59.175594015+01:00","closed_at":"2025-12-08T16:02:59.175594015+01:00","dependencies":[{"issue_id":"mcp-e7d","depends_on_id":"mcp-2ij","type":"parent-child","created_at":"2025-12-08T15:03:26.310372296+01:00","created_by":"daemon"},{"issue_id":"mcp-e7d","depends_on_id":"mcp-02c","type":"blocks","created_at":"2025-12-08T15:03:26.311037778+01:00","created_by":"daemon"}]}
{"id":"mcp-es2","title":"US3: OAuth Flow with Resource Parameter","description":"User Story 3: OAuth Authorization Flow with PKCE\n\n## Goal\nAccept resource parameter in OAuth authorization and token endpoints per RFC8707.\n\n## Tasks (T022-T026)\n- T022: Add resource parameter to authorize endpoint in OAuthAPI type\n- T023: Update handleAuthorize function signature\n- T024: Log resource parameter in handleAuthorize\n- T025: Accept resource parameter in token request\n- T026: Log resource parameter from token request\n\n## Files to Modify\n- src/MCP/Server/HTTP.hs\n\n## Reference\n- RFC8707: https://www.rfc-editor.org/rfc/rfc8707.html\n- Research: specs/001-claude-mcp-connector/research.md\n\n## Independent Test\nFull PKCE flow with resource parameter succeeds\n\n## Acceptance Scenarios (from spec.md)\n1. Server accepts code_challenge and returns authorization code\n2. Valid code_verifier exchanges for access_token + refresh_token\n3. Invalid code_verifier rejected with invalid_grant","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T15:03:50.546778523+01:00","updated_at":"2025-12-08T16:06:47.470235822+01:00","closed_at":"2025-12-08T16:06:47.470235822+01:00","dependencies":[{"issue_id":"mcp-es2","depends_on_id":"mcp-2ij","type":"parent-child","created_at":"2025-12-08T15:03:50.547605186+01:00","created_by":"daemon"},{"issue_id":"mcp-es2","depends_on_id":"mcp-e7d","type":"blocks","created_at":"2025-12-08T15:03:50.548448864+01:00","created_by":"daemon"}]}
{"id":"mcp-ghv","title":"Phase 8: Testing and documentation updates","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T16:01:01.24137995+01:00","updated_at":"2025-12-08T16:06:25.937545169+01:00","closed_at":"2025-12-08T16:06:25.937545169+01:00"}
{"id":"mcp-i84","title":"Fix unsafePerformIO tracing violations in Auth.hs","description":"## Problem\n\n`src/MCP/Server/Auth.hs` has 3 violations of FR-011:\n\n1. **Line 72**: imports `unsafePerformIO`\n2. **Line 384**: `validateCodeVerifier` uses `unsafePerformIO` to trace\n3. **Lines 421, 426**: `validateCredential` uses `unsafePerformIO` to trace\n\nAdditionally, trace calls build pre-formatted strings at call sites instead of capturing richly-typed data:\n```haskell\n-- BAD: message built at call site\nOAuthValidationError \"pkce\" (\"PKCE validation: \" \u003c\u003e validationResult)\n```\n\n## Required Fix\n\n1. **Lift to MonadIO**: Change `validateCodeVerifier` and `validateCredential` to `MonadIO m =\u003e ... -\u003e m Bool`\n\n2. **Richly-typed traces**: Replace string-building with typed constructors:\n   ```haskell\n   -- GOOD: typed data, render function formats\n   data OAuthTrace\n     = OAuthPKCEValidation Text Text Bool  -- verifier, challenge, isValid\n     | OAuthLoginAttempt Text Bool          -- username, success\n     ...\n   ```\n\n3. **Update render function**: `renderOAuthTrace` formats the typed data\n\n4. **Update call sites**: All callers of these functions must handle monadic return\n\n5. **Remove import**: Delete `import System.IO.Unsafe (unsafePerformIO)`","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-10T18:04:27.65412677+01:00","updated_at":"2025-12-10T18:05:37.638039218+01:00","closed_at":"2025-12-10T18:05:37.638039218+01:00"}
{"id":"mcp-iss","title":"Example App: --base-url CLI Option","description":"Update mcp-http example with --base-url CLI option\n\n## Goal\nAllow users to configure the public URL for OAuth endpoints when running behind a reverse proxy.\n\n## Tasks (T029-T032)\n- T029: Add --base-url CLI option to Options parser\n- T030: Update HTTPServerConfig construction to use provided base URL\n- T031: Update startup output to show Protected Resource Metadata endpoint URL\n- T032: Update OAuth demo instructions in startup output\n\n## Files to Modify\n- examples/http-server.hs\n\n## Reference\n- Quickstart: specs/001-claude-mcp-connector/quickstart.md\n- FR-009 from spec.md\n\n## Acceptance Criteria\n- mcp-http --help shows --base-url option\n- --base-url value used in OAuth endpoint URLs\n- Startup output shows correct discovery URLs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T15:04:09.071566208+01:00","updated_at":"2025-12-08T16:06:49.335369965+01:00","closed_at":"2025-12-08T16:06:49.335369965+01:00","dependencies":[{"issue_id":"mcp-iss","depends_on_id":"mcp-2ij","type":"parent-child","created_at":"2025-12-08T15:04:09.072034719+01:00","created_by":"daemon"},{"issue_id":"mcp-iss","depends_on_id":"mcp-e7d","type":"blocks","created_at":"2025-12-08T15:04:09.072843121+01:00","created_by":"daemon"}]}
{"id":"mcp-ko3","title":"Phase 2: Foundational - Core Types","description":"Add ProtectedResourceMetadata type and update HTTPServerConfig.\n\n## Tasks (T004-T009)\n- T004: Add ProtectedResourceMetadata data type to src/MCP/Server/Auth.hs\n- T005: Add ToJSON instance with RFC9728 field names\n- T006: Add FromJSON instance\n- T007: Export ProtectedResourceMetadata from module\n- T008: Add httpProtectedResourceMetadata field to HTTPServerConfig\n- T009: Add defaultProtectedResourceMetadata helper function\n\n## Files to Modify\n- src/MCP/Server/Auth.hs (T004-T007)\n- src/MCP/Server/HTTP.hs (T008-T009)\n\n## Reference\n- Data model: specs/001-claude-mcp-connector/data-model.md\n- RFC9728: https://datatracker.ietf.org/doc/html/rfc9728\n\n## Acceptance Criteria\n- ProtectedResourceMetadata type compiles\n- JSON serialization matches RFC9728 field names\n- HTTPServerConfig has new optional field","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T15:03:08.133383251+01:00","updated_at":"2025-12-08T15:04:31.523262774+01:00","closed_at":"2025-12-08T15:04:31.523262774+01:00"}
{"id":"mcp-n10","title":"Polish: Documentation \u0026 Validation","description":"Final polish and validation tasks\n\n## Goal\nDocumentation updates, testing, and final validation against Claude.ai.\n\n## Tasks (T035-T042)\n- T035: Update CLAUDE.md with ProtectedResourceAuth combinator and Protected Resource Metadata docs\n- T036: Update oauth-client-demo.sh to test protected resource metadata endpoint\n- T037: Run cabal build and fix compilation errors\n- T038: Run cabal test and verify tests pass\n- T039: Manual test: /.well-known/oauth-protected-resource\n- T040: Manual test: 401 with WWW-Authenticate header (via combinator)\n- T041: Manual test: full OAuth flow from quickstart.md\n- T042: Validate against quickstart.md\n\n## Files to Modify\n- CLAUDE.md\n- examples/oauth-client-demo.sh\n\n## Final Validation\n- Claude.ai can add mcp-http as connector\n- Complete OAuth flow succeeds (ProtectedResourceAuth combinator handles 401s)\n- MCP tools available in Claude.ai\n\n## Reference\n- Quickstart: specs/001-claude-mcp-connector/quickstart.md\n- Success Criteria: SC-001 through SC-005 in spec.md","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-08T15:04:19.147124574+01:00","updated_at":"2025-12-10T12:18:01.789928955+01:00","closed_at":"2025-12-10T12:18:01.789928955+01:00","dependencies":[{"issue_id":"mcp-n10","depends_on_id":"mcp-2ij","type":"parent-child","created_at":"2025-12-08T15:04:19.147935162+01:00","created_by":"daemon"},{"issue_id":"mcp-n10","depends_on_id":"mcp-e7d","type":"blocks","created_at":"2025-12-08T15:04:19.148742093+01:00","created_by":"daemon"},{"issue_id":"mcp-n10","depends_on_id":"mcp-iss","type":"blocks","created_at":"2025-12-08T15:04:19.149507012+01:00","created_by":"daemon"}]}
{"id":"mcp-nbp","title":"Phase 4: User Story 2 - User Views Login Context","description":"Login page displays requesting application name and requested permissions.\n\n**Goal**: Security transparency - user sees what app is requesting access and what permissions.\n\n**Independent Test**: Register client with name â†’ authorize â†’ see client name and scopes on login page\n\n**Tasks** (T029-T032):\n- Extend renderLoginPage to display client name\n- Look up client name from registeredClients\n- Display human-readable scope descriptions\n- Add scope-to-description mapping\n\n**Files**: src/MCP/Server/HTTP.hs\n**Spec**: specs/002-login-auth-page/spec.md#user-story-2\n**Acceptance**: 2 scenarios defined in spec","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T17:19:51.065226589+01:00","updated_at":"2025-12-08T17:42:21.911456968+01:00","closed_at":"2025-12-08T17:42:21.911456968+01:00","dependencies":[{"issue_id":"mcp-nbp","depends_on_id":"mcp-9k8","type":"parent-child","created_at":"2025-12-08T17:19:51.066010379+01:00","created_by":"daemon"},{"issue_id":"mcp-nbp","depends_on_id":"mcp-1q9","type":"blocks","created_at":"2025-12-08T17:19:51.066837701+01:00","created_by":"daemon"}]}
{"id":"mcp-psg","title":"US4: Token Refresh Verification","description":"User Story 4: Token Refresh\n\n## Goal\nVerify token refresh works correctly for long-running Claude.ai sessions.\n\n## Tasks (T027-T028)\n- T027: Verify handleRefreshTokenGrant returns correct TokenResponse\n- T028: Verify refresh_token rotation works correctly\n\n## Files to Review\n- src/MCP/Server/HTTP.hs\n\n## Note\nToken refresh is already implemented. This is verification only.\n\n## Independent Test\nPOST /token with refresh_token grant â†’ returns new access_token\n\n## Acceptance Scenario (from spec.md)\nGiven valid refresh_token, when client requests grant_type=refresh_token, then server issues new access_token","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T15:04:00.399566+01:00","updated_at":"2025-12-08T16:06:27.786563406+01:00","closed_at":"2025-12-08T16:06:27.786563406+01:00","dependencies":[{"issue_id":"mcp-psg","depends_on_id":"mcp-2ij","type":"parent-child","created_at":"2025-12-08T15:04:00.400051469+01:00","created_by":"daemon"},{"issue_id":"mcp-psg","depends_on_id":"mcp-02c","type":"blocks","created_at":"2025-12-08T15:04:00.400601992+01:00","created_by":"daemon"}]}
{"id":"mcp-qne","title":"Phase 6: Edge Cases and Error Handling","description":"Handle error scenarios from spec edge cases.\n\n**Tasks** (T037-T041):\n- Handle invalid/missing OAuth parameters\n- Handle expired sessions (check pendingCreatedAt)\n- Handle cookies disabled\n- Handle unregistered client_id\n- Handle invalid redirect_uri\n\n**Files**: src/MCP/Server/HTTP.hs\n**Spec**: specs/002-login-auth-page/spec.md#edge-cases","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T17:20:11.975638094+01:00","updated_at":"2025-12-08T17:46:21.331164293+01:00","closed_at":"2025-12-08T17:46:21.331164293+01:00","dependencies":[{"issue_id":"mcp-qne","depends_on_id":"mcp-9k8","type":"parent-child","created_at":"2025-12-08T17:20:11.97612816+01:00","created_by":"daemon"},{"issue_id":"mcp-qne","depends_on_id":"mcp-1q9","type":"blocks","created_at":"2025-12-08T17:20:11.976664282+01:00","created_by":"daemon"}]}
{"id":"mcp-zed","title":"T005: Create ProtocolTrace skeleton in src/MCP/Trace/Protocol.hs","description":"[P] Create MCP.Trace.Protocol module with ProtocolTrace type (composite placeholder only) and renderProtocolTrace stub. Ref: data-model.md ProtocolTrace section.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-10T11:33:29.982395309+01:00","updated_at":"2025-12-10T12:17:43.317502384+01:00","closed_at":"2025-12-10T12:17:43.317502384+01:00"}
